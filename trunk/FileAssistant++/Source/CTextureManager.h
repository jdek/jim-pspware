/***********************************************************************************

  Module :	CTextureManager.h

  Description :	

  Last Modified $Date: $

  $Revision: $

  Copyright (C) 01 August 2005 T Swann

***********************************************************************************/

#ifndef CTEXTUREMANAGER_H_
#define CTEXTUREMANAGER_H_

//**********************************************************************************
//   Include Files
//**********************************************************************************
#include "CTypes.h"
#include "CString.h"

//**********************************************************************************
//   Macros
//**********************************************************************************

//**********************************************************************************
//   Types
//**********************************************************************************
class CFile;

//**********************************************************************************
//   Constants
//**********************************************************************************

//**********************************************************************************
//   Class definitions
//**********************************************************************************

//*************************************************************************************
//	
//*************************************************************************************
class CTexture
{
	public:

		CTexture();
		~CTexture();

		bool	Init( u32 width, u32 height );

		void	Save( const CString & file_name );

		void	Upload();
		void	Swizzle();

	public:

		u32		m_nWidth;
		u32		m_nHeight;
		u32		m_nCanvasWidth;
		u32		m_nCanvasHeight;
		u8 *	m_pBuffer;
		u8 *	m_pOriginalAddress;
		u8 *	m_pVRAM;
};

//*************************************************************************************
//	
//*************************************************************************************
class CTextureManager
{
	public:

		static CTexture *	Create( const CString & filename, bool warn = false );

		static void			ResetVRAM();

	private:

		static CTexture *	ReadPNG( CFile * const p_file );
		static CTexture *	ReadJPG( CFile * const p_file );
		static CTexture *	ReadBMP( CFile * const p_file );
		static CTexture *	ReadTGA( CFile * const p_file );
};

//**********************************************************************************
//   Externs
//**********************************************************************************

//**********************************************************************************
//   Prototypes
//**********************************************************************************

#endif /* CTEXTUREMANAGER_H_ */
